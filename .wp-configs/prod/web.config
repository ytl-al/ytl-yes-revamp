<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<system.web>
		<httpRuntime enableVersionHeader="false" />
	</system.web>
	<system.webServer>
		<rewrite>
			<rules>
				<rule name="Imported Rule 2" stopProcessing="true">
					<match url="^shared/(.*)$" ignoreCase="false" />
					<conditions>
						<!--# Include in the next line all folders to exclude-->
						<add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
						<add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
						<add input="{REQUEST_FILENAME}.html" matchType="IsFile"/>
					</conditions>
					<action type="Rewrite" url="{R:0}.html" />
				</rule>
				<rule name="Redirecting .html ext" stopProcessing="true">
					<match url="^shared/(.*).html"/>
					<conditions logicalGrouping="MatchAny">
						<add input="{URL}" pattern="(.*).html"/>
					</conditions>
					<action type="Redirect" url="{R:1}"/>
				</rule>
				<rule name="WordPress: https://www.yes.my" patternSyntax="Wildcard">
					<match url="*" />
					<conditions>
						<add input="{URL}" pattern="(shared)" negate="true" />
						<add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
						<add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
					</conditions>
					<action type="Rewrite" url="index.php" />
				</rule>
				<rule name="Rewrite CDN requests" stopProcessing="true">
					<match url="^cdn/(.*)$" />
					<action type="Rewrite" url="{R:1}" />
				</rule>
			</rules>
			<outboundRules>
				<rule name="Set Access Control Allow Origin Header" preCondition="Origin header">
					<match serverVariable="RESPONSE_Access-Control-Allow-Origin" pattern="(.*)" />
					<action type="Rewrite" value="*" />
				</rule>
				<preConditions>
					<preCondition name="Origin header" logicalGrouping="MatchAll">
						<add input="{HTTP_ORIGIN}" pattern="(.+)" />
						<add input="{HTTP_X_ORIGINAL_URL}" pattern="^/cdn/(.*)$" />
					</preCondition>
				</preConditions>
			</outboundRules>
		</rewrite>
		<staticContent>
			<remove fileExtension=".woff" />
			<mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
			<remove fileExtension=".ttf" />
			<mimeMap fileExtension=".ttf" mimeType="application/octet-stream" />
			<remove fileExtension=".svg" />
			<mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
			<remove fileExtension=".woff2" />
			<mimeMap fileExtension=".woff2" mimeType="font/woff2" />
			<remove fileExtension=".json" />
			<mimeMap fileExtension=".json" mimeType="application/json" />

			<clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="3.00:00:00" />
		</staticContent>
		<security>
			<requestFiltering removeServerHeader="true">
				<denyUrlSequences>
					<add sequence="xmlrpc.php" />
				</denyUrlSequences>
			</requestFiltering>
		</security>
		<httpProtocol>
			<customHeaders>
				<remove name="X-Powered-By" />
				<remove name="Server" />
				<add name="X-Frame-Options" value="SAMEORIGIN" />
				<add name="X-Content-Type-Options" value="nosniff" />
				<add name="Strict-Transport-Security" value="max-age=31536000; includeSubDomains" />
				<add name="Permissions-Policy" value="accelerometer=(self), geolocation=(self), gyroscope=(self), magnetometer=(self), payment=(self), usb=(self)" />
				<add name="X-Xss-Protection" value="1; mode=block" />
				<add name="Expect-CT" value="max-age=86400, enforce" />
			</customHeaders>
		</httpProtocol>
	</system.webServer>
	<location path="xmlrpc.php">
		<system.webServer>
			<security>
				<ipSecurity allowUnlisted="false">
				</ipSecurity>
			</security>
		</system.webServer>
	</location>
</configuration>